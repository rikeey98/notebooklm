# π“’ notebooklm μ „μ²΄ API κ°λ° λ¬Έμ„

## ν”„λ΅μ νΈ κ°μ”

notebooklmμ€ ν”„λ΅μ νΈ, λ…ΈνΈλ¶, μ†μ¤(Source) λ“± λ‹¤μ–‘ν• μ •λ³΄λ¥Ό κ΄€λ¦¬ν•  μ μλ” Django κΈ°λ° λ°±μ—”λ“ μ‹μ¤ν…μ…λ‹λ‹¤. μ‚¬μ©μλ³„λ΅ ν”„λ΅μ νΈμ™€ λ…ΈνΈλ¶μ„ μƒμ„±ν•κ³ , κ° λ…ΈνΈλ¶μ— λ‹¤μ–‘ν• μ†μ¤ λ°μ΄ν„°λ¥Ό μ—°κ²°ν•μ—¬ κ΄€λ¦¬ν•  μ μμµλ‹λ‹¤. λν•, λ€λ‰μ μ†μ¤ λ°μ΄ν„°λ¥Ό ν¨μ¨μ μΌλ΅ μ‚­μ ν•  μ μλ” bulk delete API λ“± λ‹¤μ–‘ν• κΈ°λ¥μ„ μ κ³µν•©λ‹λ‹¤.

---

## κ³µν†µ μ‚¬ν•­
- λ¨λ“  APIλ” κΈ°λ³Έμ μΌλ΅ `/api/` prefixλ¥Ό κ°€μ§‘λ‹λ‹¤.
- λ€λ¶€λ¶„μ μ—”λ“ν¬μΈνΈλ” RESTfulν•κ² λ™μ‘ν•©λ‹λ‹¤.
- μΈμ¦/κ¶ν• μ²λ¦¬λ” ν”„λ΅μ νΈ μ„¤μ •μ— λ”°λΌ λ‹¤λ¥Ό μ μμµλ‹λ‹¤(κΈ°λ³Έμ€ μΈμ¦ ν•„μ”).
- λ¨λ“  μμ‹λ” κΈ°λ³Έμ μΌλ΅ `localhost:8000` κΈ°μ¤€μ…λ‹λ‹¤.

---

## 1. ν”„λ΅μ νΈ(Project)
### μ—”λ“ν¬μΈνΈ
```
/api/projects/
```
### μ§€μ› λ©”μ„λ“
- GET: μ „μ²΄/λ‹¨μΌ ν”„λ΅μ νΈ μ΅°ν
- POST: ν”„λ΅μ νΈ μƒμ„±
- PUT/PATCH: ν”„λ΅μ νΈ μμ •
- DELETE: ν”„λ΅μ νΈ μ‚­μ 

### GET νλΌλ―Έν„°
| μ΄λ¦„      | νƒ€μ…   | ν•„μ/μµμ… | μ„¤λ…                       |
|---------|-------|---------|--------------------------|
| user_id | int   | μµμ…    | ν•΄λ‹Ή μ‚¬μ©μμ ν”„λ΅μ νΈλ§ μ΅°ν |

### POST(μƒμ„±) νλΌλ―Έν„°
| μ΄λ¦„        | νƒ€μ…   | ν•„μ/μµμ… | μ„¤λ…           |
|-----------|-------|---------|----------------|
| name      | str   | ν•„μ    | ν”„λ΅μ νΈλ…      |
| description | str | μµμ…    | μ„¤λ…(λΉ κ°’ κ°€λ¥) |
| user      | int   | ν•„μ    | μ‚¬μ©μ id      |

#### μμ‹
```
POST /api/projects/
{
  "name": "ν”„λ΅μ νΈλ…",
  "description": "μ„¤λ…",
  "user": 1
}
```

---

## 2. Jira μ„¤μ •(JiraConfig)
### μ—”λ“ν¬μΈνΈ
```
/api/jira-configs/
```
### GET νλΌλ―Έν„°
| μ΄λ¦„      | νƒ€μ…   | ν•„μ/μµμ… | μ„¤λ…                       |
|---------|-------|---------|--------------------------|
| project | int   | μµμ…    | ν•΄λ‹Ή ν”„λ΅μ νΈμ Jiraλ§ μ΅°ν |

### POST(μƒμ„±) νλΌλ―Έν„°
| μ΄λ¦„   | νƒ€μ… | ν•„μ/μµμ… | μ„¤λ…         |
|------|-----|---------|------------|
| url  | str | ν•„μ    | Jira URL   |
| project | int | ν•„μ | ν”„λ΅μ νΈ id |

#### μμ‹
```
POST /api/jira-configs/
{
  "url": "https://jira.example.com",
  "project": 1
}
```

---

## 3. λ©”μΌ μ„¤μ •(MailConfig)
### μ—”λ“ν¬μΈνΈ
```
/api/mail-configs/
```
### GET νλΌλ―Έν„°
| μ΄λ¦„      | νƒ€μ…   | ν•„μ/μµμ… | μ„¤λ…                       |
|---------|-------|---------|--------------------------|
| project | int   | μµμ…    | ν•΄λ‹Ή ν”„λ΅μ νΈμ λ©”μΌλ§ μ΅°ν |

### POST(μƒμ„±) νλΌλ―Έν„°
| μ΄λ¦„        | νƒ€μ… | ν•„μ/μµμ… | μ„¤λ…         |
|-----------|-----|---------|------------|
| recipients | str | ν•„μ    | μ΄λ©”μΌ λ¦¬μ¤νΈ(μ½¤λ§ κµ¬λ¶„) |
| project    | int | ν•„μ    | ν”„λ΅μ νΈ id |

#### μμ‹
```
POST /api/mail-configs/
{
  "recipients": "a@a.com,b@b.com",
  "project": 1
}
```

---

## 4. λ…ΈνΈλ¶(Notebook)
### μ—”λ“ν¬μΈνΈ
```
/api/notebooks/
```
### GET νλΌλ―Έν„°
| μ΄λ¦„        | νƒ€μ…   | ν•„μ/μµμ… | μ„¤λ…                       |
|-----------|-------|---------|--------------------------|
| user_id   | int   | μµμ…    | ν•΄λ‹Ή μ‚¬μ©μμ λ…ΈνΈλ¶λ§ μ΅°ν |
| project_id| int   | μµμ…    | ν•΄λ‹Ή ν”„λ΅μ νΈμ λ…ΈνΈλ¶λ§ μ΅°ν |

### POST(μƒμ„±) νλΌλ―Έν„°
| μ΄λ¦„        | νƒ€μ…   | ν•„μ/μµμ… | μ„¤λ…           |
|-----------|-------|---------|----------------|
| name      | str   | μµμ…    | λ…ΈνΈλ¶λ…(κΈ°λ³Έκ°’: 'unnamed-notebook') |
| project   | int   | ν•„μ    | ν”„λ΅μ νΈ id    |
| create_user | int | ν•„μ    | μ‚¬μ©μ id      |

#### μμ‹
```
POST /api/notebooks/
{
  "name": "λ…ΈνΈλ¶1",
  "project": 1,
  "create_user": 1
}
```

---

## 5. μ†μ¤(Source)
### μ—”λ“ν¬μΈνΈ
```
/api/sources/
```
### GET νλΌλ―Έν„°
| μ΄λ¦„      | νƒ€μ…   | ν•„μ/μµμ… | μ„¤λ…                       |
|---------|-------|---------|--------------------------|
| user_id | int   | μµμ…    | ν•΄λ‹Ή μ‚¬μ©μκ°€ μƒμ„±ν• μ†μ¤λ§ μ΅°ν |
| project | int   | μµμ…    | ν•΄λ‹Ή ν”„λ΅μ νΈμ μ†μ¤λ§ μ΅°ν |
| notebook| int   | μµμ…    | ν•΄λ‹Ή λ…ΈνΈλ¶μ— μ—°κ²°λ μ†μ¤λ§ μ΅°ν |
| title   | str   | μµμ…    | μ λ©μ— νΉμ • λ‹¨μ–΄κ°€ ν¬ν•¨λ μ†μ¤λ§ μ΅°ν |

### POST(μƒμ„±) νλΌλ―Έν„°
| μ΄λ¦„        | νƒ€μ…     | ν•„μ/μµμ… | μ„¤λ…           |
|-----------|---------|---------|----------------|
| title     | str     | ν•„μ    | μ†μ¤ μ λ©(κ³ μ ) |
| project   | int     | ν•„μ    | ν”„λ΅μ νΈ id    |
| create_user | int   | ν•„μ    | μ‚¬μ©μ id      |
| notebook  | int     | ν•„μ    | μ—°κ²°ν•  λ…ΈνΈλ¶ id|
| content   | str     | ν•„μ    | μ†μ¤ λ‚΄μ©      |
| tag       | list(str)| μµμ…   | νƒκ·Έ λ©λ΅(κΈ°λ³Έκ°’: λΉ λ¦¬μ¤νΈ) |
| link      | str(URL) | μµμ…   | κ΄€λ ¨ URL λ§ν¬(μ—†μΌλ©΄ null/λΉ κ°’) |

#### μμ‹
```
POST /api/sources/
{
  "title": "μ†μ¤ μ λ©",
  "project": 1,
  "create_user": 1,
  "notebook": 2,
  "content": "μ†μ¤ λ‚΄μ©",
  "tag": ["νƒκ·Έ1", "νƒκ·Έ2"],
  "link": "https://example.com"
}
```

- linkλ” μ…λ ¥ν•μ§€ μ•μΌλ©΄ null λλ” λΉ κ°’μΌλ΅ μ €μ¥λ©λ‹λ‹¤.
- metadata λ°ν™ μ‹ link ν•„λ“λ„ ν•¨κ» λ°ν™λ©λ‹λ‹¤.

---

## 6. λ…ΈνΈλ¶-μ†μ¤ λ§¤ν•‘(NotebookMap)
### μ—”λ“ν¬μΈνΈ
```
/api/notebook-maps/
```
### POST(μƒμ„±) νλΌλ―Έν„°
| μ΄λ¦„      | νƒ€μ… | ν•„μ/μµμ… | μ„¤λ…         |
|---------|-----|---------|------------|
| notebook| int | ν•„μ    | λ…ΈνΈλ¶ id   |
| source  | int | ν•„μ    | μ†μ¤ id     |

#### μμ‹
```
POST /api/notebook-maps/
{
  "notebook": 1,
  "source": 2
}
```

---

## 7. μ†μ¤ λ©”νƒ€λ°μ΄ν„°(SourceMetadata)
### μ—”λ“ν¬μΈνΈ
```
/api/source-metadata/
```
### GET νλΌλ―Έν„°
- μ—†μ (μ „μ²΄/λ‹¨μΌ μ΅°νλ§ μ§€μ›)

---

## 8. μ†μ¤ μ”μ•½(SourceSummary)
### μ—”λ“ν¬μΈνΈ
```
/api/source-summary/
```
### POST(μƒμ„±) νλΌλ―Έν„°
| μ΄λ¦„    | νƒ€μ… | ν•„μ/μµμ… | μ„¤λ…     |
|-------|-----|---------|--------|
| source| int | ν•„μ    | μ†μ¤ id |
| summary| str| ν•„μ    | μ”μ•½ λ‚΄μ©|

#### μμ‹
```
POST /api/source-summary/
{
  "source": 1,
  "summary": "μ”μ•½ λ‚΄μ©"
}
```

---

## 9. κ²°κ³Ό λ°μ΄ν„°(Output)
### μ—”λ“ν¬μΈνΈ
```
/api/outputs/
```
### GET νλΌλ―Έν„°
| μ΄λ¦„      | νƒ€μ…   | ν•„μ/μµμ… | μ„¤λ…                       |
|---------|-------|---------|--------------------------|
| user    | int   | μµμ…    | ν•΄λ‹Ή μ‚¬μ©μμ κ²°κ³Όλ§ μ΅°ν |
| project | int   | μµμ…    | ν•΄λ‹Ή ν”„λ΅μ νΈμ κ²°κ³Όλ§ μ΅°ν |
| notebook| int   | μµμ…    | ν•΄λ‹Ή λ…ΈνΈλ¶μ κ²°κ³Όλ§ μ΅°ν |

### POST(μƒμ„±) νλΌλ―Έν„°
| μ΄λ¦„        | νƒ€μ… | ν•„μ/μµμ… | μ„¤λ…         |
|-----------|-----|---------|------------|
| project   | int | ν•„μ    | ν”„λ΅μ νΈ id |
| create_user | int | ν•„μ  | μ‚¬μ©μ id   |
| notebook  | int | ν•„μ    | λ…ΈνΈλ¶ id   |
| content   | str | ν•„μ    | κ²°κ³Ό λ‚΄μ©   |

#### μμ‹
```
POST /api/outputs/
{
  "project": 1,
  "create_user": 1,
  "notebook": 2,
  "content": "κ²°κ³Ό λ‚΄μ©"
}
```

---

## 10. μ μ €(User)
### μ—”λ“ν¬μΈνΈ
```
/api/users/
```
### GET νλΌλ―Έν„°
- μ—†μ (μ „μ²΄/λ‹¨μΌ μ΅°νλ§ μ§€μ›)

---

## 11. μ¤λΌν΄ λ°μ΄ν„° μ‚½μ…
### μ—”λ“ν¬μΈνΈ
```
/api/oracle-insert/
```
### POST(μƒμ„±) νλΌλ―Έν„°
| μ΄λ¦„   | νƒ€μ… | ν•„μ/μµμ… | μ„¤λ…     |
|------|-----|---------|--------|
| param1| str | ν•„μ    | κ°’1     |
| param2| str | ν•„μ    | κ°’2     |

#### μμ‹
```
POST /api/oracle-insert/
{
  "param1": "κ°’1",
  "param2": "κ°’2"
}
```

---

## 12. μ†μ¤ Bulk Delete (λ€λ‰ μ‚­μ )
### μ—”λ“ν¬μΈνΈ
```
DELETE /api/sources/bulk_delete/
```
### μΏΌλ¦¬ νλΌλ―Έν„°(ν• λ²μ— ν•λ‚λ§!)
| μ΄λ¦„        | νƒ€μ… | ν•„μ/μµμ… | μ„¤λ…         |
|-----------|-----|---------|------------|
| project_id| int | μµμ…    | ν•΄λ‹Ή ν”„λ΅μ νΈμ μ†μ¤ μ „μ²΄ μ‚­μ  |
| notebook_id| int| μµμ…    | ν•΄λ‹Ή λ…ΈνΈλ¶μ μ†μ¤ μ „μ²΄ μ‚­μ    |
| user_id   | int | μµμ…    | ν•΄λ‹Ή μ‚¬μ©μμ μ†μ¤ μ „μ²΄ μ‚­μ    |

- μ„Έ νλΌλ―Έν„° μ¤‘ λ°λ“μ‹ ν•λ‚λ§ μ…λ ¥ν•΄μ•Ό ν•λ©°, μ—¬λ¬ κ° μ…λ ¥ μ‹ 400 μ—λ¬ λ°ν™

#### μμ‹
```
DELETE /api/sources/bulk_delete/?project_id=1
```

---

## 13. κΈ°νƒ€ μ°Έκ³  μ‚¬ν•­
- λ¨λ“  μ—”λ“ν¬μΈνΈλ” Django REST Frameworkμ ν‘μ¤€ κ·μΉ™μ„ λ”°λ¦…λ‹λ‹¤.
- GET: λ©λ΅/μƒμ„Έ μ΅°ν, POST: μƒμ„±, PUT/PATCH: μμ •, DELETE: μ‚­μ 
- ν•„ν„°λ§ νλΌλ―Έν„°λ” μΏΌλ¦¬μ¤νΈλ§μΌλ΅ μ „λ‹¬
- μƒμ„Έν• ν•„λ“ μ •λ³΄λ” `/api/{μ—”λ“ν¬μΈνΈ}/schema/` λλ” Swagger λ“± API λ¬Έμ„ν™” λ„κµ¬λ΅ ν™•μΈ κ°€λ¥

---

## 14. μμ‹: μ „μ²΄ API νλ¦„
1. μ‚¬μ©μ μƒμ„±(κ΄€λ¦¬μ)
2. ν”„λ΅μ νΈ μƒμ„±
3. λ…ΈνΈλ¶ μƒμ„± (ν”„λ΅μ νΈμ— μ—°κ²°)
4. μ†μ¤ μƒμ„± (λ…ΈνΈλ¶, ν”„λ΅μ νΈ, μ‚¬μ©μ μ—°κ²°)
5. μ†μ¤ λ©”νƒ€λ°μ΄ν„°/μ”μ•½ μλ™ μƒμ„±
6. κ²°κ³Ό λ°μ΄ν„° μƒμ„± λ° μ΅°ν
7. ν•„μ”μ‹ μ†μ¤ λ€λ‰ μ‚­μ 

---

## 15. λ¨λΈ κ΄€κ³„ λ‹¤μ΄μ–΄κ·Έλ¨ (ν…μ¤νΈ)
- User 1 --- N Project
- Project 1 --- N Notebook
- Project 1 --- N Source
- Notebook 1 --- N NotebookMap N --- 1 Source
- Source 1 --- 1 SourceMetadata
- Source 1 --- 1 SourceSummary
- Output: Project, Notebook, Userμ™€ μ—°κ²°

---

## 16. κ°λ° ν™κ²½ λ° μ‹¤ν–‰ λ°©λ²•
- Python 3.x
- Django 5.x
- Django REST Framework
- SQLite (κΈ°λ³Έ)

### μ‹¤ν–‰ λ°©λ²•
1. μμ΅΄μ„± μ„¤μΉ: `pip install -r requirements.txt`
2. λ§μ΄κ·Έλ μ΄μ…: `python manage.py migrate`
3. μ„λ²„ μ‹¤ν–‰: `python manage.py runserver`
4. κ΄€λ¦¬μ κ³„μ • μƒμ„±(μ„ νƒ): `python manage.py createsuperuser`

---

## 17. λ¬Έμ λ° κΈ°μ—¬
- μ¶”κ°€ λ¬Έμ, λ²„κ·Έ μ λ³΄, κΈ°μ—¬λ” ν”„λ΅μ νΈ κ΄€λ¦¬μ λλ” μ΄μ νΈλμ»¤λ¥Ό μ΄μ©ν•΄ μ£Όμ„Έμ”. 