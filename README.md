# π“’ notebooklm μ „μ²΄ API κ°λ° λ¬Έμ„

## ν”„λ΅μ νΈ κ°μ”

notebooklmμ€ ν”„λ΅μ νΈ, λ…ΈνΈλ¶, μ†μ¤(Source) λ“± λ‹¤μ–‘ν• μ •λ³΄λ¥Ό κ΄€λ¦¬ν•  μ μλ” Django κΈ°λ° λ°±μ—”λ“ μ‹μ¤ν…μ…λ‹λ‹¤. μ‚¬μ©μλ³„λ΅ ν”„λ΅μ νΈμ™€ λ…ΈνΈλ¶μ„ μƒμ„±ν•κ³ , κ° λ…ΈνΈλ¶μ— λ‹¤μ–‘ν• μ†μ¤ λ°μ΄ν„°λ¥Ό μ—°κ²°ν•μ—¬ κ΄€λ¦¬ν•  μ μμµλ‹λ‹¤. λν•, λ€λ‰μ μ†μ¤ λ°μ΄ν„°λ¥Ό ν¨μ¨μ μΌλ΅ μ‚­μ ν•  μ μλ” bulk delete API λ“± λ‹¤μ–‘ν• κΈ°λ¥μ„ μ κ³µν•©λ‹λ‹¤.

---

## κ³µν†µ μ‚¬ν•­
- λ¨λ“  APIλ” κΈ°λ³Έμ μΌλ΅ `/api/` prefixλ¥Ό κ°€μ§‘λ‹λ‹¤.
- λ€λ¶€λ¶„μ μ—”λ“ν¬μΈνΈλ” RESTfulν•κ² λ™μ‘ν•©λ‹λ‹¤.
- μΈμ¦/κ¶ν• μ²λ¦¬λ” ν”„λ΅μ νΈ μ„¤μ •μ— λ”°λΌ λ‹¤λ¥Ό μ μμµλ‹λ‹¤(κΈ°λ³Έμ€ μΈμ¦ ν•„μ”).
- λ¨λ“  μμ‹λ” κΈ°λ³Έμ μΌλ΅ `localhost:8000` κΈ°μ¤€μ…λ‹λ‹¤.

---

## 1. ν”„λ΅μ νΈ(Project)
### μ—”λ“ν¬μΈνΈ
```
/api/projects/
```
### μ§€μ› λ©”μ„λ“
- GET: μ „μ²΄/λ‹¨μΌ ν”„λ΅μ νΈ μ΅°ν
- POST: ν”„λ΅μ νΈ μƒμ„±
- PUT/PATCH: ν”„λ΅μ νΈ μμ •
- DELETE: ν”„λ΅μ νΈ μ‚­μ 

### νλΌλ―Έν„° λ° μμ‹
#### 1) μ „μ²΄ ν”„λ΅μ νΈ μ΅°ν
```
GET /api/projects/
```
- μΏΌλ¦¬ νλΌλ―Έν„°: `user_id` (ν•΄λ‹Ή μ‚¬μ©μμ ν”„λ΅μ νΈλ§ μ΅°ν)
- μμ‹: `/api/projects/?user_id=1`

#### 2) λ‹¨μΌ ν”„λ΅μ νΈ μ΅°ν
```
GET /api/projects/{id}/
```

#### 3) ν”„λ΅μ νΈ μƒμ„±
```
POST /api/projects/
{
  "name": "ν”„λ΅μ νΈλ…",
  "description": "μ„¤λ…",
  "user": 1
}
```

#### 4) ν”„λ΅μ νΈ μμ •
```
PUT /api/projects/{id}/
{
  "name": "μμ •λ ν”„λ΅μ νΈλ…",
  ...
}
```

#### 5) ν”„λ΅μ νΈ μ‚­μ 
```
DELETE /api/projects/{id}/
```

---

## 2. Jira μ„¤μ •(JiraConfig)
### μ—”λ“ν¬μΈνΈ
```
/api/jira-configs/
```
### μ§€μ› λ©”μ„λ“
- GET: μ „μ²΄/λ‹¨μΌ Jira μ„¤μ • μ΅°ν (projectλ΅ ν•„ν„° κ°€λ¥)
- POST: μƒμ„±
- PUT/PATCH: μμ •
- DELETE: μ‚­μ 

### μμ‹
- `/api/jira-configs/?project=1` (νΉμ • ν”„λ΅μ νΈμ Jira μ„¤μ •λ§ μ΅°ν)

---

## 3. λ©”μΌ μ„¤μ •(MailConfig)
### μ—”λ“ν¬μΈνΈ
```
/api/mail-configs/
```
### μ§€μ› λ©”μ„λ“ λ° μμ‹
- GET: μ „μ²΄/λ‹¨μΌ μ΅°ν (`project`λ΅ ν•„ν„° κ°€λ¥)
- POST: μƒμ„±
- PUT/PATCH: μμ •
- DELETE: μ‚­μ 

---

## 4. λ…ΈνΈλ¶(Notebook)
### μ—”λ“ν¬μΈνΈ
```
/api/notebooks/
```
### μ§€μ› λ©”μ„λ“ λ° μμ‹
- GET: μ „μ²΄/λ‹¨μΌ μ΅°ν (`user_id`, `project_id`λ΅ ν•„ν„° κ°€λ¥)
- POST: μƒμ„±
- PUT/PATCH: μμ •
- DELETE: μ‚­μ 

#### μμ‹
- `/api/notebooks/?user_id=1&project_id=2`

---

## 5. μ†μ¤(Source)
### μ—”λ“ν¬μΈνΈ
```
/api/sources/
```
### μ§€μ› λ©”μ„λ“
- GET: μ „μ²΄/λ‹¨μΌ μ†μ¤ μ΅°ν (μ—¬λ¬ ν•„ν„° μ§€μ›)
- POST: μ†μ¤ μƒμ„±
- PUT/PATCH: μ†μ¤ μμ •
- DELETE: μ†μ¤ μ‚­μ 

### GET νλΌλ―Έν„°
- `user_id`: ν•΄λ‹Ή μ‚¬μ©μκ°€ μƒμ„±ν• μ†μ¤λ§ μ΅°ν
- `project`: ν•΄λ‹Ή ν”„λ΅μ νΈμ μ†μ¤λ§ μ΅°ν
- `notebook`: ν•΄λ‹Ή λ…ΈνΈλ¶μ— μ—°κ²°λ μ†μ¤λ§ μ΅°ν
- `title`: μ†μ¤ μ λ©μ— νΉμ • λ‹¨μ–΄κ°€ ν¬ν•¨λ μ†μ¤λ§ μ΅°ν

#### μμ‹
- `/api/sources/?user_id=1`
- `/api/sources/?project=2`
- `/api/sources/?notebook=3`
- `/api/sources/?title=κ²€μƒ‰μ–΄`

### POST μμ‹
```
POST /api/sources/
{
  "title": "μ†μ¤ μ λ©",
  "project": 1,
  "create_user": 1,
  "notebook": 2,  // μ—°κ²°ν•  λ…ΈνΈλ¶ id
  "tag": ["νƒκ·Έ1", "νƒκ·Έ2"],
  "content": "μ†μ¤ λ‚΄μ©"
}
```

### μƒμ„Έ μ΅°ν
```
GET /api/sources/{id}/
```
- metadata, summary λ“± μƒμ„Έ μ •λ³΄ ν¬ν•¨

---

## 6. λ…ΈνΈλ¶-μ†μ¤ λ§¤ν•‘(NotebookMap)
### μ—”λ“ν¬μΈνΈ
```
/api/notebook-maps/
```
### μ§€μ› λ©”μ„λ“ λ° μμ‹
- GET: μ „μ²΄/λ‹¨μΌ μ΅°ν
- POST: μƒμ„± (λ…ΈνΈλ¶κ³Ό μ†μ¤ μ—°κ²°)
- PUT/PATCH: μμ •
- DELETE: μ‚­μ 

---

## 7. μ†μ¤ λ©”νƒ€λ°μ΄ν„°(SourceMetadata)
### μ—”λ“ν¬μΈνΈ
```
/api/source-metadata/
```
### μ§€μ› λ©”μ„λ“
- GET: μ „μ²΄/λ‹¨μΌ μ†μ¤ λ©”νƒ€λ°μ΄ν„° μ΅°ν (μ½κΈ° μ „μ©)

---

## 8. μ†μ¤ μ”μ•½(SourceSummary)
### μ—”λ“ν¬μΈνΈ
```
/api/source-summary/
```
### μ§€μ› λ©”μ„λ“
- GET: μ „μ²΄/λ‹¨μΌ μ†μ¤ μ”μ•½ μ΅°ν
- POST: μƒμ„±
- PUT/PATCH: μμ •
- DELETE: μ‚­μ 

---

## 9. κ²°κ³Ό λ°μ΄ν„°(Output)
### μ—”λ“ν¬μΈνΈ
```
/api/outputs/
```
### μ§€μ› λ©”μ„λ“
- GET: μ „μ²΄/λ‹¨μΌ κ²°κ³Ό μ΅°ν (`user`, `project`, `notebook`μΌλ΅ ν•„ν„° κ°€λ¥)
- POST: μƒμ„±
- PUT/PATCH: μμ •
- DELETE: μ‚­μ 

#### μμ‹
- `/api/outputs/?user=1&project=2&notebook=3`

---

## 10. μ μ €(User)
### μ—”λ“ν¬μΈνΈ
```
/api/users/
```
### μ§€μ› λ©”μ„λ“
- GET: μ „μ²΄/λ‹¨μΌ μ μ € μ΅°ν (μ½κΈ° μ „μ©)

---

## 11. μ¤λΌν΄ λ°μ΄ν„° μ‚½μ…
### μ—”λ“ν¬μΈνΈ
```
/api/oracle-insert/
```
### μ§€μ› λ©”μ„λ“
- POST: μ¤λΌν΄ DBμ— λ°μ΄ν„° μ‚½μ…

#### μ”μ²­ μμ‹
```
POST /api/oracle-insert/
{
  "param1": "κ°’1",
  "param2": "κ°’2"
}
```
- param1, param2λ” ν•„μ

#### μ‘λ‹µ μμ‹
- μ„±κ³µ: `{ "result": "success" }`
- μ‹¤ν¨: `{ "error": "μ—λ¬ λ©”μ‹μ§€" }`

---

## 12. μ†μ¤ Bulk Delete (λ€λ‰ μ‚­μ )
### μ—”λ“ν¬μΈνΈ
```
DELETE /api/sources/bulk_delete/
```
### μ§€μ› νλΌλ―Έν„° (ν• λ²μ— ν•λ‚λ§!)
- `project_id` : ν•΄λ‹Ή ν”„λ΅μ νΈμ λ¨λ“  μ†μ¤ μ‚­μ 
- `notebook_id` : ν•΄λ‹Ή λ…ΈνΈλ¶μ λ¨λ“  μ†μ¤ μ‚­μ 
- `user_id` : ν•΄λ‹Ή μ‚¬μ©μκ°€ μƒμ„±ν• λ¨λ“  μ†μ¤ μ‚­μ 

#### μ‚¬μ© μμ‹
- `/api/sources/bulk_delete/?project_id=1`
- `/api/sources/bulk_delete/?notebook_id=2`
- `/api/sources/bulk_delete/?user_id=3`

#### μ‘λ‹µ μμ‹
```
{
  "deleted": 5
}
```

#### μ—λ¬ μμ‹
```
{
  "error": "project_id, notebook_id, user_id μ¤‘ ν•λ‚λ” ν•„μμ…λ‹λ‹¤."
}
```
λλ”
```
{
  "error": "ν• λ²μ— ν•λ‚μ νλΌλ―Έν„°λ§ ν—μ©λ©λ‹λ‹¤."
}
```

---

## 13. κΈ°νƒ€ μ°Έκ³  μ‚¬ν•­
- λ¨λ“  μ—”λ“ν¬μΈνΈλ” Django REST Frameworkμ ν‘μ¤€ κ·μΉ™μ„ λ”°λ¦…λ‹λ‹¤.
- GET: λ©λ΅/μƒμ„Έ μ΅°ν, POST: μƒμ„±, PUT/PATCH: μμ •, DELETE: μ‚­μ 
- ν•„ν„°λ§ νλΌλ―Έν„°λ” μΏΌλ¦¬μ¤νΈλ§μΌλ΅ μ „λ‹¬
- μƒμ„Έν• ν•„λ“ μ •λ³΄λ” `/api/{μ—”λ“ν¬μΈνΈ}/schema/` λλ” Swagger λ“± API λ¬Έμ„ν™” λ„κµ¬λ΅ ν™•μΈ κ°€λ¥

---

## 14. μμ‹: μ „μ²΄ API νλ¦„
1. μ‚¬μ©μ μƒμ„±(κ΄€λ¦¬μ)
2. ν”„λ΅μ νΈ μƒμ„±
3. λ…ΈνΈλ¶ μƒμ„± (ν”„λ΅μ νΈμ— μ—°κ²°)
4. μ†μ¤ μƒμ„± (λ…ΈνΈλ¶, ν”„λ΅μ νΈ, μ‚¬μ©μ μ—°κ²°)
5. μ†μ¤ λ©”νƒ€λ°μ΄ν„°/μ”μ•½ μλ™ μƒμ„±
6. κ²°κ³Ό λ°μ΄ν„° μƒμ„± λ° μ΅°ν
7. ν•„μ”μ‹ μ†μ¤ λ€λ‰ μ‚­μ 

---

## 15. λ¨λΈ κ΄€κ³„ λ‹¤μ΄μ–΄κ·Έλ¨ (ν…μ¤νΈ)
- User 1 --- N Project
- Project 1 --- N Notebook
- Project 1 --- N Source
- Notebook 1 --- N NotebookMap N --- 1 Source
- Source 1 --- 1 SourceMetadata
- Source 1 --- 1 SourceSummary
- Output: Project, Notebook, Userμ™€ μ—°κ²°

---

## 16. κ°λ° ν™κ²½ λ° μ‹¤ν–‰ λ°©λ²•
- Python 3.x
- Django 5.x
- Django REST Framework
- SQLite (κΈ°λ³Έ)

### μ‹¤ν–‰ λ°©λ²•
1. μμ΅΄μ„± μ„¤μΉ: `pip install -r requirements.txt`
2. λ§μ΄κ·Έλ μ΄μ…: `python manage.py migrate`
3. μ„λ²„ μ‹¤ν–‰: `python manage.py runserver`
4. κ΄€λ¦¬μ κ³„μ • μƒμ„±(μ„ νƒ): `python manage.py createsuperuser`

---

## 17. λ¬Έμ λ° κΈ°μ—¬
- μ¶”κ°€ λ¬Έμ, λ²„κ·Έ μ λ³΄, κΈ°μ—¬λ” ν”„λ΅μ νΈ κ΄€λ¦¬μ λλ” μ΄μ νΈλμ»¤λ¥Ό μ΄μ©ν•΄ μ£Όμ„Έμ”. 